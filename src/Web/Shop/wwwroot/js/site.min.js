var Site=function(){function n(){this.paginas={};this.layout={};this.onLoad=[]}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){$(document).siteMask();$.validator&&($.validator.methods.range=function(n,t,i){var r=n.replace(",",".");return this.optional(t)||r>=i[0]&&r<=i[1]},$.validator.methods.number=function(n,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(n)});$(function(t){var r,i;for(r in n.instance.layout)n.instance.layout.hasOwnProperty(r)&&(i=n.instance.layout[r],i&&i.init&&$.isFunction(i.init)&&i.init(t));n.bindPagina($("[data-pagina]"),t)})},n.bindPagina=function(t,i){t.each(function(t,r){if(!$(r).data("pagina-carregado")){$(r).data("pagina-carregado",!0);var u=n.instance.paginas[$(r).data("pagina")];u&&u.init&&$.isFunction(u.init)&&u.init(i,$(r).data("init"))}})},n.bindSelect=function(n,t,i,r,u){t&&i&&r&&$.ajax({ajaxLoader:!1,cache:!1,method:"POST",data:u,async:!0,url:t,success:function(n){var t="",i;($(r).data("selecione")||$(r).data("selecione")===null||$(r).data("selecione")===undefined)&&(t='<option value="">Selecione...<\/option>');n!=null&&n!==undefined&&n.length>0?($(r).prop("disabled",!1),i=[],$(n).each(function(n,t){t.group&&t.group.name&&i.indexOf(t.group.name)===-1&&i.push(t.group.name)}),i.length===0?$(n).each(function(n,i){var u=$(r).data("value")==i.value||$(r).data("value")&&$(r).data("value").indexOf(parseInt(i.value))!==-1?'selected="selected"':"";t+='<option value="'+i.value+'"'+u+">"+i.text+"<\/option>"}):$(i).each(function(i,u){t+='<optgroup label="'+u+'">';$(n).each(function(n,i){if(i.group&&i.group.name&&i.group.name===u){var f=$(r).data("value")==i.value||$(r).data("value")&&$(r).data("value").indexOf(parseInt(i.value))!==-1?'selected="selected"':"";t+='<option value="'+i.value+'"'+f+">"+i.text+"<\/option>"}});t+="<\/optgroup>"})):$(r).attr("chosen")!==undefined&&$(r).prop("disabled",$(r).data("disabled"));$(r).html(t);$(r).attr("chosen")!==undefined&&$(r).trigger("chosen:updated");$(r).trigger("change")}})},n}(),Carrinho=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;$(".esh-basket-minus").on("click",function(t){t.preventDefault();n.post($(this))});$(".esh-basket-plus").on("click",function(t){t.preventDefault();n.post($(this))});$(".esh-basket-remove").on("click",function(t){t.preventDefault();n.post($(this))});$(".esh-basket-items").each(function(n,t){var i=parseInt($(".esh-basket-input").val());i>1?$(".esh-basket-minus",t).show():$(".esh-basket-minus",t).hide()})},n.prototype.post=function(n){var t=n.attr("href"),i;t&&(i={idProdutoSku:n.data("idprodutosku"),idCarrinho:n.data("idcarrinho"),idCarrinhoItem:n.data("idcarrinhoitem")},$.ajax({ajaxLoader:!1,cache:!1,method:"POST",data:i,async:!0,url:t,beforeSend:function(){n.prop("disabled",!0)},success:function(){window.location.reload()},error:function(n){alert(n.responseText)},complete:function(){n.prop("disabled",!1)}}))},n}(),Checkout,FaleConosco,Login,MeusPedidos,MinhaConta,Produto;Site.instance.paginas.Carrinho=Carrinho.instance;Checkout=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var t=this;PagSeguroDirectPayment.setSessionId($("#Pagamento_IdSessao").val());$("#Pagamento_NumeroCartao").on("change",function(){var t=$(this).val();!t||t.length<6||n.getBrand(t.replace(/\D/g,"").substring(0,6))}).trigger("change");$("form").on("submit",function(){var n=$(this).data("valid");return n?!0:!1});$("button").on("click",function(){var t=$(this);t.prop("disabled",!0);PagSeguroDirectPayment.onSenderHashReady(function(i){if(i.status=="error")return console.log(i.message),t.prop("disabled",!1),!1;$("input#Pagamento_Hash").val(i.senderHash);n.getCardToken(t)})})},n.getCardToken=function(n){PagSeguroDirectPayment.createCardToken({cardNumber:$("input#Pagamento_NumeroCartao").val(),brand:$("input#Pagamento_Bandeira").val(),cvv:$("input#Pagamento_Cvv").val(),expirationMonth:$("select#Pagamento_MesValidade").val(),expirationYear:$("select#Pagamento_AnoValidade").val(),success:function(n){$("input#Pagamento_CardToken").val(n.card.token);$("form").data("valid",!0);$("form").submit()},error:function(t){console.log(t);n.prop("disabled",!1);$("#CardToken").val("")}})},n.getBrand=function(t){PagSeguroDirectPayment.getBrand({cardBin:t,success:function(t){$("#Pagamento_Bandeira").val(t.brand.name);n.getInstallments(t.brand.name)},error:function(n){console.log(n)}})},n.getInstallments=function(n){var i=$("input[type='hidden']#ValorTotal").val(),t=parseInt($("input#QuantidadeMaximaParcelamento").val());PagSeguroDirectPayment.getInstallments({amount:i.replace(",","."),maxInstallmentNoInterest:t,brand:n,success:function(i){if(!i.error){var r="",u=$("#Pagamento_QuantidadeParcelas"),f=parseInt(u.data("value"));$(i.installments[n]).each(function(n,i){if(i.quantity<=t){var u=i.interestFree?"sem juros":"com juros",e=f===i.quantity?"selected":"";r+='<option value="'+i.quantity+'"'+e+">"+i.quantity+"x de "+i.installmentAmount+" "+u+"<\/option>"}});u.html(r)}},error:function(n){console.log(n)}})},n}();Site.instance.paginas.Checkout=Checkout.instance;FaleConosco=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;$("form#FaleConosco").submit(function(n){var i,t;if(n.preventDefault(),i=$(this).attr("action"),t=$(this),!t.valid()||!i)return!1;var r=$('input:not([type="hidden"])',t),u=$("textarea",t),f=new FormData(this);$.ajax({url:i,type:"POST",data:f,beforeSend:function(){r.prop("disabled",!0);u.prop("disabled",!0);$("button",t).prop("disabled",!0)},success:function(n){r.val("");u.val("");alert(n)},error:function(n){alert(n.responseText)},complete:function(){r.prop("disabled",!1);u.prop("disabled",!1);$("button",t).prop("disabled",!1)},cache:!1,contentType:!1,processData:!1})})},n}();Site.instance.paginas.FaleConosco=FaleConosco.instance;Login=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this},n}();Site.instance.paginas.Login=Login.instance;MeusPedidos=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;$("#meus-pedidos").collapse({toggle:!1});$("#meus-pedidos a.esh-orders-link").on("click",function(){var t=$(this).data("action"),n=$(this).data("target");$.ajax({async:!1,method:"GET",url:t,success:function(t){$(n).html(t);$(n).collapse("show")}})})},n}();Site.instance.paginas.MeusPedidos=MeusPedidos.instance;MinhaConta=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;$("#AlterarSenha").on("change",function(){$(this).is(":checked")?$("[alterar-senha]").show():$("[alterar-senha]").hide()}).trigger("change")},n}();Site.instance.paginas.MinhaConta=MinhaConta.instance;Produto=function(){function n(){}return Object.defineProperty(n,"instance",{get:function(){return this.ins||(this.ins=new this)},enumerable:!0,configurable:!0}),n.prototype.init=function(){var n=this;$("form#produto").on("submit",function(){var n=$('[name="IdProdutoSku"]:checked').val();return n>0})},n}();Site.instance.paginas.Produto=Produto.instance;